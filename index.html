<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>TalÃ£o Ordem de ServiÃ§o</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
@page {
  size: A4;
  margin: 15mm;
}
  
body {
  background: #ccc;
  font-family: Helvetica, sans-serif;
  display: flex;
  justify-content: center;
}


#nota {
  padding: 15mm 15mm 10mm 15mm;
}

/* ================= CABEÃ‡ALHO ================= */
.header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}

.header img {
  height: 45px;
}

.header .titulo {
  text-align: right;
  margin-top: 8 mm;
  font-size: 11px;
  font-weight: bold;
}
  
  .logo-texto {
  font-size: 30px;
  font-weight: 900;
  letter-spacing: -1.5px;
  line-height: 1;

/* ================= LINHAS DE DADOS ================= */
.linha {
  display: flex;
  align-items: flex-end;
  font-size: 11px;
  margin-bottom: 4px;
}

.linha span {
  white-space: nowrap;
  margin-right: 4px;
}

input {
  border: none;
  border-bottom: 1px solid #000;
  font-size: 11px;
  width: 100%;
  outline: none;
}

/* ================= TABELA ================= */
.tabela {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
}
  
.tabela th {
  border: 1px solid #000;
  padding: 2mm;
  background: #000;
  color: #fff;
  font-weight: bold;
}

.tabela td {
  border: 1px solid #000;
  padding: 1mm;
  vertical-align: top;
}

/* INPUTS DA TABELA */
.tabela input {
  width: 100%;
  border: none;
  outline: none;
  font-size: 11px;
  text-align: center;
  box-sizing: border-box;
}

/* ðŸ”¥ DESCRIÃ‡ÃƒO â€” PARTE IMPORTANTE */
.tabela td.descricao input {
  text-align: left;
  font-size: 10px;
  padding: 2mm;
}

  /* ESSENCIAL PARA NÃƒO SUMIR NO PDF */
  white-space: pre-wrap;
  word-break: break-word;
  overflow-wrap: break-word;
}

/* ================= TOTAL ================= */
.total-box {
  display: flex;
  justify-content: flex-end;
  font-size: 12px;
  margin-top: 6px;
}

/* ================= RODAPÃ‰ ================= */
.rodape {
  font-size: 10px;
  text-align: center;
  border-top: 1px solid #000;
  padding-top: 4px;
  margin-top: 8px;
}
</style>
</head>

<body>

<div id="nota">

  <!-- CABEÃ‡ALHO -->
  <div class="header">
  <div class="logo-texto">JONAS BIKES</div>
  <div class="titulo">
    RECIBO DE VENDA
      (17) 99755-2141<br>
      Av. ArapuÃ£, 2815 â€“ Jardim Santo Expedito<br>
      @jonas_bikes_jales
    </div>
  </div>

  <h3 style="text-align:center; margin:6px 0;">RECIBO DE VENDA</h3>

  <!-- DADOS -->
  <div class="linha">
    <span>Cliente:</span><input id="cliente">
  </div>

  <div class="linha">
    <span>EndereÃ§o:</span><input>
  </div>

  <div class="linha">
    <span>CPF/CNPJ:</span><input style="width:120px">
    <span style="margin-left:10px">Fone:</span><input>
  </div>

  <div class="linha">
    <span>Data:</span><input style="width:80px">
  </div>

  <!-- TABELA -->
  <table class="tabela">
    <thead>
      <tr>
        <th style="width:10%">QTD</th>
        <th style="width:50%">DESCRIÃ‡ÃƒO</th>
        <th style="width:20%">PREÃ‡O</th>
        <th style="width:20%">TOTAL</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><input class="qtd"></td>
       <td class="descricao"><input class="desc"></td>
        <td><input class="preco"></td>
        <td><input class="linhaTotal" readonly></td>
      </tr>
      <tr>
        <td><input class="qtd"></td>
       <td class="descricao"><input class="desc"></td>
        <td><input class="preco"></td>
        <td><input class="linhaTotal" readonly></td>
      </tr>
      <tr>
        <td><input class="qtd"></td>
        <td class="descricao"><input class="desc"></td>
        <td><input class="preco"></td>
        <td><input class="linhaTotal" readonly></td>
      </tr>
    </tbody>
  </table>

  <!-- TOTAL -->
  <div class="total-box">
    <strong>TOTAL: R$ <span id="totalGeral">0,00</span></strong>
  </div>

  <!-- RODAPÃ‰ -->
  <div class="rodape">
    RECIBO DE VENDA Â· Jonas Bikes
  </div>

</div>

<button onclick="gerarPDF()" style="display:block;margin:15px auto;">
  Gerar PDF
</button>

<script>
function calcular() {
  let total = 0;

  document.querySelectorAll("tbody tr").forEach(tr => {
    const qtd = parseFloat(tr.querySelector(".qtd").value) || 0;
    const preco = parseFloat(tr.querySelector(".preco").value) || 0;
    const soma = qtd * preco;

    tr.querySelector(".linhaTotal").value = soma.toFixed(2);
    total += soma;
  });

  document.getElementById("totalGeral").innerText = total.toFixed(2);
}

document.addEventListener("input", calcular);

function gerarPDF() {
  const cliente = document.getElementById("cliente").value || "cliente";
  const data = new Date().toISOString().split("T")[0];

  html2pdf().set({
    margin: 0,
    html2canvas: { scale: 2, useCORS: true },
    jsPDF: { unit: 'mm', format: 'a5', orientation: 'portrait' },
    filename: `OS-${cliente.replace(/\s+/g, "_")}-${data}.pdf`
  }).from(document.getElementById("nota")).save();
}
</script>

</body>
</html>

</script>

</body>
</html>
