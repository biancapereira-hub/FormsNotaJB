<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Recibo de Venda â€“ Jonas Bikes</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
@page {
  size: A5;
  margin: 0;
}

body {
  body {
  margin: 0;
  padding: 0;
  background: #ccc;
  font-family: Arial, Helvetica, sans-serif;
}


#nota {
  width: 148mm;
  background: #fff;
  padding: 8mm;
  box-sizing: border-box;
  border: 1px solid #000;

  /* ðŸ”¥ AJUSTE HORIZONTAL */
  margin-left: 4mm;
}


/* HEADER */
.header {
  display: grid;
  grid-template-columns: auto 1fr;
  border-bottom: 1px solid #000;
  padding-bottom: 2mm;
  margin-bottom: 3mm;
}

.header img {
  height: 26mm;
}

.header-info {
  font-size: 10px;
  font-weight: bold;
  text-align: right;
  line-height: 1.2;
  align-self: end;
}

/* TITULO */
.titulo {
  text-align: center;
  font-weight: bold;
  font-size: 14px;
  letter-spacing: 2px;
  margin: 3mm 0;
}

/* DADOS */
.linha {
  display: flex;
  align-items: flex-end;
  font-size: 11px;
  font-weight: bold;
  margin-bottom: 2mm;
}

td {
  border: 1px solid #000;
  padding: 0;
  height: 5.5mm;   /* ðŸ”¥ antes era 6mm */
}

td input {
  height: 100%;
  line-height: 6mm;
}

.linha span {
  margin-right: 5px;
  white-space: nowrap;
}

.linha input {
  flex: 1;
  border: none;
  border-bottom: 1px solid #000;
  outline: none;
  font-size: 12px;
}

/* TABELA */
table {
  width: 100%;
  border-collapse: collapse;
  font-size: 11px;
}

th {
  background: #000;
  color: #fff;
  border: 1px solid #000;
  padding: 2mm;
}

td {
  border: 1px solid #000;
  padding: 0;
  height: 7mm;
}

td input {
  width: 100%;
  height: 100%;
  border: none;
  outline: none;
  text-align: center;
  font-size: 11px;
}

/* TOTAL */
.total {
  display: flex;
  justify-content: flex-end;
  font-size: 13px;
  font-weight: bold;
  margin-top: 4mm;
}

/* RODAPE */
.rodape {
  border-top: 1px solid #000;
  margin-top: 10mm;     /* ðŸ”¥ mais respiro */
  padding-top: 3mm;
  font-size: 11px;
  text-align: center;
}
</style>
</head>

<body>

<div id="nota">

  <!-- HEADER -->
  <div class="header">
    <img src="logo-jonas-bikes.png" alt="Jonas Bikes">
    <div class="header-info">
      (17) 99755-2141<br>
      Av. ArapuÃ£, 2815 â€“ Jardim Santo Expedito<br>
      @jonas_bikes_jales
    </div>
  </div>

  <!-- TITULO -->
  <div class="titulo">RECIBO DE VENDA</div>

  <!-- DADOS -->
  <div class="linha">
    <span>Cliente:</span>
    <input id="cliente">
  </div>

  <div class="linha">
    <span>EndereÃ§o:</span>
    <input>
  </div>

  <div class="linha">
    <span>CPF/CNPJ:</span>
    <input style="max-width:120px">
    <span style="margin-left:10px">Fone:</span>
    <input>
  </div>

  <div class="linha">
    <span>Data:</span>
    <input style="max-width:80px">
  </div>

  <!-- TABELA -->
  <table>
    <thead>
      <tr>
        <th style="width:10%">QTD</th>
        <th style="width:50%">DESCRIÃ‡ÃƒO</th>
        <th style="width:20%">PREÃ‡O</th>
        <th style="width:20%">TOTAL</th>
      </tr>
    </thead>
    <tbody>
      <!-- 6 linhas -->
      <tr>
        <td><input class="qtd"></td>
        <td><input></td>
        <td><input class="preco"></td>
        <td><input class="linhaTotal" readonly></td>
      </tr>
      <tr>
        <td><input class="qtd"></td>
        <td><input></td>
        <td><input class="preco"></td>
        <td><input class="linhaTotal" readonly></td>
      </tr>
      <tr>
        <td><input class="qtd"></td>
        <td><input></td>
        <td><input class="preco"></td>
        <td><input class="linhaTotal" readonly></td>
      </tr>
      <tr>
        <td><input class="qtd"></td>
        <td><input></td>
        <td><input class="preco"></td>
        <td><input class="linhaTotal" readonly></td>
      </tr>
      <tr>
        <td><input class="qtd"></td>
        <td><input></td>
        <td><input class="preco"></td>
        <td><input class="linhaTotal" readonly></td>
      </tr>
      <tr>
        <td><input class="qtd"></td>
        <td><input></td>
        <td><input class="preco"></td>
        <td><input class="linhaTotal" readonly></td>
      </tr>
    </tbody>
  </table>

  <!-- TOTAL -->
  <div class="total">
    TOTAL: R$ <span id="totalGeral">0,00</span>
  </div>

  <!-- RODAPÃ‰ -->
  <div class="rodape">
    RECIBO DE VENDA Â· Jonas Bikes
  </div>

</div>

<button onclick="gerarPDF()" style="display:block;margin:20px auto;padding:8px 16px;font-weight:bold">
  Gerar PDF
</button>

<script>
function calcular() {
  let total = 0;

  document.querySelectorAll("tbody tr").forEach(tr => {
    const qtdInput = tr.querySelector(".qtd");
    const precoInput = tr.querySelector(".preco");
    const totalInput = tr.querySelector(".linhaTotal");

    const qtd = parseFloat(qtdInput.value);
    const preco = parseFloat(precoInput.value);

    if (!isNaN(qtd) && !isNaN(preco)) {
      const soma = qtd * preco;
      totalInput.value = soma.toFixed(2);
      total += soma;
    } else {
      totalInput.value = ""; // ðŸ”¥ nÃ£o mostra 0.00
    }
  });

  document.getElementById("totalGeral").innerText = total.toFixed(2);
}

document.addEventListener("input", calcular);

function gerarPDF() {
  const cliente = document.getElementById("cliente").value || "cliente";
  const data = new Date().toISOString().split("T")[0];
  const nome = `OS-${cliente}-${data}`.replace(/\s+/g, "-");

  const elemento = document.getElementById("nota");

  html2pdf(elemento, {
    filename: nome + ".pdf",
    margin: 5, // ðŸ”¥ margem padrÃ£o, equilibrada
    image: { type: "jpeg", quality: 1 },
    html2canvas: {
      scale: 2.2
    },
    jsPDF: {
      unit: "mm",
      format: "a5",
      orientation: "portrait"
    }
  });
}

</script>

</body>
</html>
