<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Recibo Jonas Bikes</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body {
  font-family: Arial, sans-serif;
  background: #eee;
  padding: 20px;
}
table input {
  width: 100%;
}
</style>
</head>

<body>

<h2>Recibo Jonas Bikes</h2>

<label>Cliente: <input id="cliente"></label><br>
<label>Endereço: <input id="endereco"></label><br>
<label>CPF/CNPJ: <input id="cpf"></label><br>
<label>Fone: <input id="fone"></label><br><br>

<table border="1" cellpadding="5">
<thead>
<tr>
  <th>Qtd</th>
  <th>Descrição</th>
  <th>Preço</th>
</tr>
</thead>
<tbody id="itens">
<tr>
  <td><input class="qtd"></td>
  <td><input class="desc"></td>
  <td><input class="preco"></td>
</tr>
<tr>
  <td><input class="qtd"></td>
  <td><input class="desc"></td>
  <td><input class="preco"></td>
</tr>
<tr>
  <td><input class="qtd"></td>
  <td><input class="desc"></td>
  <td><input class="preco"></td>
</tr>
</tbody>
</table>

<br>
<button onclick="gerarPDF()">Gerar PDF</button>

<script src="recibo.js"></script>
</body>
</html>
<script>
function gerarPDF() {
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF('p', 'mm', 'a4');

  const cliente = document.getElementById('cliente').value;
  const endereco = document.getElementById('endereco').value;
  const cpf = document.getElementById('cpf').value;
  const fone = document.getElementById('fone').value;

  const linhas = document.querySelectorAll('#itens tr');

  let y = 20;

  // ===== CABEÇALHO =====
  pdf.setFontSize(20);
  pdf.text('JONAS BIKES', 20, y);

  pdf.setFontSize(9);
  pdf.text('(17) 99755-2141', 140, y);
  pdf.text('Av. Arapuã, 2815 – Jardim Santo Expedito', 140, y + 4);
  pdf.text('@jonas_bikes_jales', 140, y + 8);

  y += 15;
  pdf.line(20, y, 190, y);

  // ===== TÍTULO =====
  y += 10;
  pdf.setFontSize(14);
  pdf.text('RECIBO DE VENDA', 105, y, { align: 'center' });

  y += 10;

  // ===== DADOS =====
  pdf.setFontSize(10);
  pdf.text(`Cliente: ${cliente}`, 20, y);
  y += 6;
  pdf.text(`Endereço: ${endereco}`, 20, y);
  y += 6;
  pdf.text(`CPF/CNPJ: ${cpf}     Fone: ${fone}`, 20, y);

  y += 10;

  // ===== TABELA (CABEÇALHO) =====
  pdf.setFillColor(0);
  pdf.rect(20, y, 170, 8, 'F');
  pdf.setTextColor(255);
  pdf.text('QTD', 22, y + 6);
  pdf.text('DESCRIÇÃO', 45, y + 6);
  pdf.text('PREÇO', 155, y + 6);
  pdf.text('TOTAL', 175, y + 6);
  pdf.setTextColor(0);

  y += 8;

  let totalGeral = 0;

  // ===== LINHAS =====
  linhas.forEach(linha => {
    const qtd = Number(linha.querySelector('.qtd').value || 0);
    const desc = linha.querySelector('.desc').value || '';
    const preco = Number(linha.querySelector('.preco').value || 0);
    const total = qtd * preco;

    const textoDesc = pdf.splitTextToSize(desc, 95);
    const altura = textoDesc.length * 5;

    pdf.rect(20, y, 170, altura);
    pdf.text(String(qtd), 22, y + 5);
    pdf.text(textoDesc, 45, y + 5);
    pdf.text(preco.toFixed(2), 155, y + 5);
    pdf.text(total.toFixed(2), 175, y + 5);

    y += altura;
    totalGeral += total;
  });

  y += 8;

  // ===== TOTAL =====
  pdf.setFontSize(12);
  pdf.text(`TOTAL: R$ ${totalGeral.toFixed(2)}`, 150, y);

  // ===== RODAPÉ =====
  y += 10;
  pdf.line(20, y, 190, y);
  y += 5;
  pdf.setFontSize(9);
  pdf.text('RECIBO DE VENDA · Jonas Bikes', 105, y, { align: 'center' });

  const hoje = new Date().toISOString().slice(0,10);
  pdf.save(`recibo-${cliente || 'cliente'}-${hoje}.pdf`);
}
</script>
