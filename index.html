<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Recibo de Venda – Jonas Bikes</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
@page {
  size: A5;
  margin: 0;
}

body {
  background: #ccc;
  font-family: Arial, Helvetica, sans-serif;
}

#nota {
  width: 148mm;
  min-height: 210mm;
  background: #fff;
  margin: 10px auto;
  padding: 6mm;
  box-sizing: border-box;
  border: 1px solid #000;
}

/* HEADER */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid #000;
  padding-bottom: 3mm;
  margin-bottom: 4mm;
}

.header img {
  height: 35mm;
  object-fit: contain;
}

.header-info {
  font-size: 11px;
  font-weight: bold;
  text-align: right;
  line-height: 1.3;
}

/* TITULO */
.titulo {
  text-align: center;
  font-weight: bold;
  font-size: 16px;
  letter-spacing: 2px;
  margin-bottom: 4mm;
}

/* DADOS */
.linha {
  display: flex;
  align-items: flex-end;
  font-size: 12px;
  font-weight: bold;
  margin-bottom: 3mm;
}

.linha span {
  margin-right: 5px;
  white-space: nowrap;
}

.linha input {
  flex: 1;
  border: none;
  border-bottom: 1px solid #000;
  outline: none;
  font-size: 12px;
}

/* TABELA */
table {
  width: 100%;
  border-collapse: collapse;
  font-size: 11px;
}

th {
  background: #000;
  color: #fff;
  border: 1px solid #000;
  padding: 2mm;
}

td {
  border: 1px solid #000;
  padding: 0;
  height: 7mm;
}

td input {
  width: 100%;
  height: 100%;
  border: none;
  outline: none;
  text-align: center;
  font-size: 11px;
}

/* TOTAL */
.total {
  display: flex;
  justify-content: flex-end;
  font-size: 13px;
  font-weight: bold;
  margin-top: 4mm;
}

/* RODAPE */
.rodape {
  border-top: 1px solid #000;
  margin-top: 6mm;
  padding-top: 3mm;
  font-size: 11px;
  text-align: center;
}
</style>
</head>

<body>

<div id="nota">

  <!-- HEADER -->
  <div class="header">
    <img src="logo-jonas-bikes.png" alt="Jonas Bikes">
    <div class="header-info">
      (17) 99755-2141<br>
      Av. Arapuã, 2815 – Jardim Santo Expedito<br>
      @jonas_bikes_jales
    </div>
  </div>

  <!-- TITULO -->
  <div class="titulo">RECIBO DE VENDA</div>

  <!-- DADOS -->
  <div class="linha">
    <span>Cliente:</span>
    <input id="cliente">
  </div>

  <div class="linha">
    <span>Endereço:</span>
    <input>
  </div>

  <div class="linha">
    <span>CPF/CNPJ:</span>
    <input style="max-width:120px">
    <span style="margin-left:10px">Fone:</span>
    <input>
  </div>

  <div class="linha">
    <span>Data:</span>
    <input style="max-width:80px">
  </div>

  <!-- TABELA -->
  <table>
    <thead>
      <tr>
        <th style="width:10%">QTD</th>
        <th style="width:50%">DESCRIÇÃO</th>
        <th style="width:20%">PREÇO</th>
        <th style="width:20%">TOTAL</th>
      </tr>
    </thead>
    <tbody>
      <!-- 6 linhas -->
      <tr>
        <td><input class="qtd"></td>
        <td><input></td>
        <td><input class="preco"></td>
        <td><input class="linhaTotal" readonly></td>
      </tr>
      <tr>
        <td><input class="qtd"></td>
        <td><input></td>
        <td><input class="preco"></td>
        <td><input class="linhaTotal" readonly></td>
      </tr>
      <tr>
        <td><input class="qtd"></td>
        <td><input></td>
        <td><input class="preco"></td>
        <td><input class="linhaTotal" readonly></td>
      </tr>
      <tr>
        <td><input class="qtd"></td>
        <td><input></td>
        <td><input class="preco"></td>
        <td><input class="linhaTotal" readonly></td>
      </tr>
      <tr>
        <td><input class="qtd"></td>
        <td><input></td>
        <td><input class="preco"></td>
        <td><input class="linhaTotal" readonly></td>
      </tr>
      <tr>
        <td><input class="qtd"></td>
        <td><input></td>
        <td><input class="preco"></td>
        <td><input class="linhaTotal" readonly></td>
      </tr>
    </tbody>
  </table>

  <!-- TOTAL -->
  <div class="total">
    TOTAL: R$ <span id="totalGeral">0,00</span>
  </div>

  <!-- RODAPÉ -->
  <div class="rodape">
    RECIBO DE VENDA · Jonas Bikes
  </div>

</div>

<button onclick="gerarPDF()" style="display:block;margin:20px auto;padding:8px 16px;font-weight:bold">
  Gerar PDF
</button>

<script>
function calcular() {
  let total = 0;

  document.querySelectorAll("tbody tr").forEach(tr => {
    const qtd = parseFloat(tr.querySelector(".qtd").value) || 0;
    const preco = parseFloat(tr.querySelector(".preco").value) || 0;
    const soma = qtd * preco;

    tr.querySelector(".linhaTotal").value = soma.toFixed(2);
    total += soma;
  });

  document.getElementById("totalGeral").innerText = total.toFixed(2);
}

document.addEventListener("input", calcular);

function gerarPDF() {
  const cliente = document.getElementById("cliente").value || "cliente";
  const data = new Date().toISOString().split("T")[0];
  const nome = `OS-${cliente}-${data}`.replace(/\s+/g, "-");

  html2pdf().set({
    margin: 0,
    filename: nome + ".pdf",
    html2canvas: { scale: 2, useCORS: true },
    jsPDF: { unit: "mm", format: "a5", orientation: "portrait" }
  }).from(document.getElementById("nota")).save();
}
</script>

</body>
</html>
